<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Python Basics Review</title>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.5.1/dist/confetti.browser.min.js"></script>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f9f9f9;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background-color: #ffffff;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        .container-header {
            padding: 20px 20px 10px 20px;
        }
        .back-link {
            font-size: 16px;
            color: #555;
            text-decoration: none;
            font-weight: bold;
        }
        .back-link:hover {
            color: #3498db;
            text-decoration: underline;
        }
        #menu {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            background-color: #333;
            padding: 10px 20px; 
        }
        #menu button {
            background-color: #4CAF50; 
            color: white;
            border: none;
            padding: 10px 15px;
            margin: 5px;
            cursor: pointer;
            border-radius: 5px;
            font-size: 14px;
            transition: background-color 0.3s;
        }
        #menu button:hover {
            background-color: #45a049;
        }

        #menu button.completed {
            background-color: #218c3d !important;
            position: relative;
            padding-right: 30px;
        }
        #menu button.completed::after {
            content: "‚úÖ";
            position: absolute;
            right: 8px;
            font-size: 12px;
        }
        #container {
            display: flex;
            flex-wrap: wrap; 
            padding: 20px; 
            gap: 20px; 
        }
        .panel {
            flex: 1; 
            min-width: 300px; 
            background-color: #ffffff;
            border: 1px solid #ddd;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
            padding: 20px;
            box-sizing: border-box; 
        }
        .panel h2 {
            margin-top: 0;
            color: #333;
            border-bottom: 2px solid #eee;
            padding-bottom: 10px;
        }
        #example-panel pre {
            background-color: #f4f4f4;
            padding: 15px;
            border-radius: 5px;
            border: 1px solid #e0e0e0;
            overflow-x: auto; 
            white-space: pre-wrap;
        }
        #example-question {
            font-weight: bold;
            color: #0056b3; 
            margin-top: 20px;
        }
        #user-input {
            width: 100%;
            height: 150px;
            box-sizing: border-box; 
            border: 1px solid #ccc;
            border-radius: 5px;
            padding: 10px;
            font-family: Consolas, "Courier New", monospace; 
            font-size: 14px;
        }
        #check-btn {
            width: 100%;
            padding: 12px;
            background-color: #007BFF; /* Blue */
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            margin-top: 10px;
            transition: background-color 0.3s;
        }
        #check-btn:hover {
            background-color: #0056b3;
        }
        #feedback {
            margin-top: 15px;
            font-size: 16px;
            font-weight: bold;
            padding: 10px;
            border-radius: 5px;
            white-space: pre-wrap; 
        }
        .correct {
            color: #155724; 
            background-color: #d4edda;
            border: 1px solid #c3e6cb;
        }
        .incorrect {
            color: #721c24; 
            background-color: #f8d7da;
            border: 1px solid #f5c6cb;
        }
        .btn {
            display: inline-block;
            padding: 15px 35px;
            font-size: 1.2em;
            font-weight: bold;
            color: white;
            text-decoration: none;
            border-radius: 8px;
            transition: background-color 0.3s ease, transform 0.2s ease;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
        .btn-external {
            background-color: #3498db;
        }
        .btn-external:hover {
            background-color: #2980b9;
            transform: translateY(-3px);
        }

        .container-footer {
            padding: 20px;
            text-align: center;
            border-top: 2px solid #e0e0e0;
        }
        
        .login-wrapper {
            position: absolute;
            top: 20px;
            right: 20px;
            z-index: 1000; 
        }
        .btn-login {
            background-color: #4285F4; color: white; border: none; 
            padding: 8px 15px; border-radius: 5px; cursor: pointer; font-weight: bold;
        }
        @media (max-width: 600px) {
            .login-wrapper { position: static; text-align: center; margin-bottom: 10px; }
        }
    </style>
</head>
<body>
    <div id="login-container" class="login-wrapper"></div>
    <div class="container">

        <div class="container-header">
            <a href="index.html" class="back-link">‚Üê Back to Main</a>
        </div>

        <nav id="menu"></nav>

        <main id="container">
            <div id="example-panel" class="panel">
                <h2 id="example-title"></h2>
                <div id="example-description"></div>
                <p id="example-question"></p>
            </div>
            <div id="input-panel" class="panel">
                <h2>Input Panel</h2>
                <p>Read the problem on the left and enter your code.</p>
                <textarea id="user-input" placeholder="Enter your code here..."></textarea>
                <button id="check-btn">Check Answer</button>
                <p id="feedback"></p>
            </div>
        </main>

        <div class="container-footer">
            <a href="https://www.online-python.com/" class="btn btn-external" target="_blank">
                üåê Live Python Practice Site
            </a>
        </div>

    </div>

    <script type="module">
    import { saveProgressToDB, getUserProgress } from './firebase.js';

    const PAGE_KEY = 'python_practice_progress';

    const topicsData = [
        {
            id: 'printInput',
            name: 'print() & input()',
            example: `
                <p><b>print()</b>: Displays the value inside the parentheses on the screen.</p>
                <pre><code>print("Hello")
print(123)</code></pre>
                <p><b>input()</b>: Receives input from the user.</p>
                <pre><code>name = input("Enter your name: ")
print(name)</code></pre>
            `,
            question: 'Write the code to print "Hello, World!" to the screen.',
            answer: 'print("Hello, World!")'
        },
        {
            id: 'math',
            name: 'Basic Math (+, -, *, /)',
            example: `
                <p>Python supports basic arithmetic operations.</p>
                <pre><code>print(10 + 5)  # Addition (Result: 15)
print(10 - 5)  # Subtraction (Result: 5)
print(10 * 5)  # Multiplication (Result: 50)
print(10 / 5)  # Division (Result: 2.0)</code></pre>
            `,
            question: 'Write the code to print the result of adding 10 and 5.',
            answer: 'print(10 + 5)'
        },
        {
            id: 'variable',
            name: 'Variable',
            example: `
                <p>A variable is a space to store a value. Use the <b>=</b> sign to assign a value.</p>
                <pre><code>age = 30
name = "Alice"
print(age)
print(name)</code></pre>
            `,
            question: 'Write the code to store the number 25 in a variable named my_age.',
            answer: 'my_age = 25'
        },
        {
            id: 'types',
            name: 'Data Types',
            example: `
                <p>There are several types of data. Lists can hold multiple types!</p>
                <pre><code>x = 10        # Integer (int)
y = 3.14      # Float (float)
z = "Python"  # String (str)
a = True      # Boolean (bool)
b = [1, "hi", True] # List (can hold different types)</code></pre>
            `,
            question: 'Write the code to create a variable named subject with the string value "Python".',
            answer: 'subject = "Python"'
        },
        {
            id: 'conversion',
            name: 'type(), int(), str()',
            example: `
                <p>You can check or convert data types.</p>
                <pre><code>print(type(10))   # &lt;class 'int'&gt;
num_str = "123"
num_int = int(num_str) # 123 (as a number)
str_num = str(123)   # "123" (as a string)</code></pre>
            `,
            question: 'Write the code to convert the string "500" to the number 500 and store it in a variable named num.',
            answer: 'num = int("500")'
        },
        {
            id: 'stringSlice',
            name: 'String Index & Slice',
            example: `
                <p><b>Indexing</b>: Gets a single character. (Starts from 0)</p>
                <pre><code>s = "Python"
print(s[0])   # 'P'
print(s[-1])  # 'n' (Last character)</code></pre>
                <p><b>Slicing</b>: Extracts a range. <b>[start:end]</b> (end is not included)</p>
                <pre><code>s = "Python"
print(s[1:4]) # 'yth' (from index 1 up to *before* 4)</code></pre>
            `,
            question: 'Given the variable text = "Hello", write the code to slice and print only "ell".',
            answer: 'print(text[1:4])'
        },
        {
            id: 'listIntro',
            name: 'List',
            example: `
                <p>A <b>List</b> is a collection of items, stored in order. Uses square brackets <b>[ ]</b>.</p>
                <pre><code># An empty list
empty_list = []

# A list of numbers
numbers = [1, 2, 3, 4]

# A list of strings
fruits = ["apple", "banana", "cherry"]</code></pre>
            `,
            question: 'Create a list named fruits containing "apple" and "banana".',
            answer: 'fruits = ["apple", "banana"]'
        },
        {
            id: 'listIndexModify',
            name: 'List Index & Modify',
            example: `
                <p>Lists use indexing and slicing, just like strings.</p>
                <pre><code>fruits = ["apple", "banana", "cherry"]
print(fruits[0])    # 'apple'
print(fruits[1:3])  # ['banana', 'cherry']</code></pre>
                <p>You can change a value at a specific index.</p>
                <pre><code>fruits[0] = "orange"
# fruits is now ["orange", "banana", "cherry"]</code></pre>
            `,
            question: 'Given nums = [1, 2, 9], write code to change the 9 to a 3.',
            answer: 'nums[2] = 3'
        },
        {
            id: 'listMethods',
            name: 'List Methods',
            example: `
                <p><b>len()</b>: Gets the number of items in the list.</p>
                <p><b>.append()</b>: Adds a new item to the <b>end</b> of the list.</p>
                <p><b>.remove()</b>: Deletes the <b>first</b> item with a specific value.</p>
                <pre><code>colors = ["red", "blue"]
print(len(colors)) # 2
colors.append("green") # ["red", "blue", "green"]
colors.remove("red")   # ["blue", "green"]</code></pre>
            `,
            question: 'Given my_list = [1, 2, 3], write code to add the number 4 to the end.',
            answer: 'my_list.append(4)'
        },
        {
            id: 'tupleIntro',
            name: 'Tuple',
            example: `
                <p>A <b>Tuple</b> is just like a list, but it <b>cannot be changed</b> after it is created. Uses parentheses <b>( )</b>.</p>
                <pre><code># A tuple
point = (10, 20)
print(point[0])  # 10

# This will cause an ERROR:
# point[0] = 5 </code></pre>
            `,
            question: 'Create a tuple named point with the values 10 and 20.',
            answer: 'point = (10, 20)'
        },
        {
            id: 'dictIntro',
            name: 'Dictionary',
            example: `
                <p>A <b>Dictionary</b> stores items as <b>key-value pairs</b> (like a list with labels). Uses curly braces <b>{ }</b>.</p>
                <pre><code># A dictionary
student = {"name": "Alice", "age": 20}

# Access a value using its key
print(student["name"])  # 'Alice'

# Add a new key-value pair
student["grade"] = "A"</code></pre>
            `,
            question: 'Create a dictionary named car with a key "color" and value "red".',
            answer: 'car = {"color": "red"}'
        },
        {
            id: 'ifStatement',
            name: 'if',
            example: `
                <p>The <b>if</b> statement runs code <b>only if</b> a condition is True. Code must be indented (4 spaces or 1 tab).</p>
                <pre><code>x = 10
if x > 5:
    print("x is greater than 5")
    
# This line is not indented, so it runs always
print("Done")</code></pre>
            `,
            question: 'Given x = 20, write an if statement to print "High" if x > 10.',
            answer: 'if x > 10:\n    print("High")'
        },
        {
            id: 'ifElse',
            name: 'if-else',
            example: `
                <p><b>else</b> runs code if the <b>if</b> condition is False.</p>
                <pre><code>temp = 15
if temp > 20:
    print("It is hot")
else:
    print("It is not hot")</code></pre>
            `,
            question: 'Given y = 5, write an if-else statement to print "High" if y > 10, and "Low" otherwise.',
            answer: 'if y > 10:\n    print("High")\nelse:\n    print("Low")'
        },
        {
            id: 'elif',
            name: 'if-elif-else',
            example: `
                <p><b>elif</b> (else if) checks multiple conditions in order.</p>
                <pre><code>score = 85
if score >= 90:
    print("A")
elif score >= 80:
    print("B")
else:
    print("C")
# This will print "B"</code></pre>
            `,
            question: 'Given score = 75, print "A" if score > 90, "B" if score > 80, or "C" if score > 70.',
            answer: 'if score > 90:\n    print("A")\nelif score > 80:\n    print("B")\nelif score > 70:\n    print("C")'
        },
        {
            id: 'comparison',
            name: 'Comparison Operators',
            example: `
                <p>Used to compare two values. Returns <b>True</b> or <b>False</b>.</p>
                <ul>
                    <li><code>&gt;</code> : Greater than</li>
                    <li><code>&lt;</code> : Less than</li>
                    <li><code>==</code> : Equal to</li>
                    <li><code>!=</code> : Not equal to</li>
                    <li><code>&gt;=</code> : Greater than or equal to</li>
                    <li><code>&lt;=</code> : Less than or equal to</li>
                </ul>
                <pre><code>print(10 > 5)  # True
print(5 == 5)  # True
print(5 != 5)  # False</code></pre>
            `,
            question: 'Write code to print True if 10 is equal to 10.',
            answer: 'print(10 == 10)'
        },
        {
            id: 'logical',
            name: 'Logical Operators',
            example: `
                <p>Used to combine conditional statements.</p>
                <ul>
                    <li><b>and</b>: True if <b>both</b> statements are true.</li>
                    <li><b>or</b>: True if <b>at least one</b> statement is true.</li>
                    <li><b>not</b>: Reverses the result (True -> False).</li>
                </ul>
                <pre><code>a = 10
b = 5
# True because both are True
print(a > 5 and b < 10) 

# True because one is True
print(a > 100 or b == 5)

# False because not reverses True
print(not (a == 10))</code></pre>
            `,
            question: 'Write code that checks if 10 is greater than 5 AND 3 is less than 4.',
            answer: 'print(10 > 5 and 3 < 4)'
        },
        {
            id: 'nestedIf',
            name: 'Nested If',
            example: `
                <p>You can place an <b>if</b> statement inside another <b>if</b> statement.</p>
                <pre><code>num = 10
if num > 5:
    print("Greater than 5")
    if num == 10:
        print("It is 10")</code></pre>
            `,
            question: 'Write a nested if: If age >= 18, check if age < 30. If both are true, print "Youth".',
            answer: 'if age >= 18:\n    if age < 30:\n        print("Youth")'
        },
        {
            id: 'tryExcept',
            name: 'Try/Except',
            example: `
                <p>Prevents the program from crashing when an error occurs (e.g., dividing by zero, invalid input).</p>
                <pre><code>try:
    # Code that might cause an error
    print(10 / 0)
except:
    # Code runs if an error occurs
    print("You cannot divide by zero!")</code></pre>
                <p>Common use: Handling invalid user input (text instead of number).</p>
            `,
            question: 'Wrap `print(int("abc"))` in a try/except block. Print "Error" if it fails.',
            answer: 'try:\n    print(int("abc"))\nexcept:\n    print("Error")'
        },
        {
            id: 'forLoop',
            name: 'For',
            example: `
                <p>Loops through numbers, lists, or text.</p>
                <pre><code># Range (0 to 2)
for i in range(3):
    print(i)

# List
fruits = ["apple", "banana"]
for fruit in fruits:
    print(fruit)

# Text
for char in "Hi":
    print(char)</code></pre>
            `,
            question: 'Write a for loop that prints numbers 0 to 4 using range().',
            answer: 'for i in range(5):\n    print(i)'
        },
        {
            id: 'whileLoop',
            name: 'While',
            example: `
                <p>Repeats as long as the condition is <b>True</b>.</p>
                <pre><code>i = 0
while i < 3:
    print(i)
    i = i + 1</code></pre>
            `,
            question: 'Write a while loop that runs while x is less than 5. Inside, print x and increment x by 1.',
            answer: 'while x < 5:\n    print(x)\n    x = x + 1'
        },
        {
            id: 'breakContinue',
            name: 'Break & Continue',
            example: `
                <p><b>break</b>: Stops the loop completely.</p>
                <p><b>continue</b>: Skips the current step and goes to the next.</p>
                <pre><code>for i in range(10):
    if i == 5:
        break  # Stops at 5
    if i == 2:
        continue # Skips 2</code></pre>
            `,
            question: 'Inside a for loop (range 10), break the loop if the number equals 7.',
            answer: 'for i in range(10):\n    if i == 7:\n        break'
        },
        {
            id: 'functions',
            name: 'Functions',
            example: `
                <p>A function is a reusable block of code. Defined using <b>def</b>.</p>
                <pre><code># Define
def greet():
    print("Hello!")

# Call (Use)
greet()</code></pre>
            `,
            question: 'Define a function named `say_hi` that prints "Hi".',
            answer: 'def say_hi():\n    print("Hi")'
        },
        {
            id: 'paramReturn',
            name: 'Parameters & Return',
            example: `
                <p><b>Parameter</b>: Input value for function.</p>
                <p><b>Return</b>: Output value from function.</p>
                <pre><code>def add(a, b):
    return a + b

result = add(3, 5) # result is 8</code></pre>
            `,
            question: 'Define a function `multiply(x, y)` that returns x * y.',
            answer: 'def multiply(x, y):\n    return x * y'
        },
        {
            id: 'practiceSum',
            name: 'Sum Function',
            example: `
                <p>Create a function that takes two inputs and prints their sum.</p>
                <pre><code>def print_sum(a, b):
    print(a + b)</code></pre>
            `,
            question: 'Define `add_nums(a, b)` that prints the sum of a and b.',
            answer: 'def add_nums(a, b):\n    print(a + b)'
        },
        {
            id: 'practiceMax',
            name: 'Max Function',
            example: `
                <p>Create a function that returns the larger of two numbers.</p>
                <pre><code>def find_max(a, b):
    if a > b:
        return a
    else:
        return b</code></pre>
            `,
            question: 'Define `my_max(a, b)` that returns the larger number using if/else.',
            answer: 'def my_max(a, b):\n    if a > b:\n        return a\n    else:\n        return b'
        },
        {
            id: 'modules',
            name: 'Modules & Libraries',
            example: `
                <p>Libraries are pre-written code. Use <b>import</b> to use them.</p>
                <p><b>Method 1</b>: Import the whole module.</p>
                <pre><code>import math
print(math.sqrt(16)) # 4.0</code></pre>
                <p><b>Method 2</b>: Import specific function.</p>
                <pre><code>from math import sqrt
print(sqrt(16))</code></pre>
            `,
            question: 'Import the `math` module and print the square root (sqrt) of 25.',
            answer: 'import math\nprint(math.sqrt(25))'
        },
        {
            id: 'randomMod',
            name: 'Random',
            example: `
                <p>Used to generate random numbers (like dice).</p>
                <pre><code>import random
# Random number between 1 and 10
print(random.randint(1, 10))</code></pre>
            `,
            question: 'Import random and print a random number between 1 and 6.',
            answer: 'import random\nprint(random.randint(1, 6))'
        }
    ];

    let currentAnswer = '';
    let currentTopicId = ''; 
    const menu = document.getElementById('menu');
    const exampleTitle = document.getElementById('example-title');
    const exampleDesc = document.getElementById('example-description');
    const exampleQ = document.getElementById('example-question');
    const userInput = document.getElementById('user-input');
    const checkBtn = document.getElementById('check-btn');
    const feedback = document.getElementById('feedback');

    function loadTopic(topicId) {
        const topic = topicsData.find(t => t.id === topicId);
        if (!topic) return;

        currentTopicId = topicId; 
        exampleTitle.innerText = topic.name;
        exampleDesc.innerHTML = topic.example;
        exampleQ.innerText = 'Problem: ' + topic.question;
        currentAnswer = topic.answer;
        
        userInput.value = '';
        feedback.innerText = '';
        feedback.className = '';
    }
    // DBÏóêÏÑú ÏßÑÎèÑ Î∂àÎü¨Ïò§Í∏∞ (firebase.jsÍ∞Ä Î°úÍ∑∏Ïù∏ Ïãú Ìò∏Ï∂úÌï®)
    window.loadProgressFromDB = async function(uid) {
        // DBÏóêÏÑú Îç∞Ïù¥ÌÑ∞ Í∞ÄÏ†∏Ïò§Í∏∞
        const progress = await getUserProgress(PAGE_KEY); 
        
        // Í∞ÄÏ†∏Ïò® Îç∞Ïù¥ÌÑ∞Î°ú Î≤ÑÌäº ÏÉâÏπ†ÌïòÍ∏∞
        if (progress && progress.length > 0) {
            progress.forEach(completedId => {
                const btn = document.getElementById('btn-' + completedId);
                if (btn) btn.classList.add('completed');
            });
        }
    }

    // [UPDATED] Ï†ïÎãµ ÌôïÏù∏ Î∞è DB Ï†ÄÏû•
    function checkAnswer() {
        if (currentAnswer === '') {
                alert('Please select a topic from the menu first.');
                return;
        }

        let userText = userInput.value.trim().replace(/\s+/g, ' ');
        let correctAnswer = currentAnswer.trim().replace(/\s+/g, ' ');

        // (ÏòµÏÖò) ÏûêÎ∞îÏä§ÌÅ¨Î¶ΩÌä∏ ÌéòÏù¥ÏßÄÏù∏ Í≤ΩÏö∞ Îî∞Ïò¥Ìëú Ïú†Ïó∞ÌïòÍ≤å Ï≤òÎ¶¨
        userText = userText.replace(/'/g, '"');
        correctAnswer = correctAnswer.replace(/'/g, '"');

        if (userText === correctAnswer) {
            feedback.innerText = 'Correct! üëè';
            feedback.className = 'correct'; 
            
            // Ìè≠Ï£Ω Ìö®Í≥º
            confetti({
                particleCount: 100,
                spread: 70,
                origin: { y: 0.6 }
            });

            // [ÌïµÏã¨] Firebase DBÏóê Ï†ÄÏû•ÌïòÍ∏∞
            saveProgressToDB(PAGE_KEY, currentTopicId);

            // [Ï¶âÏãú Î∞òÏòÅ] Î≤ÑÌäº ÏÉâÏÉÅ Î≥ÄÍ≤Ω (DB Í∞îÎã§Ïò§Îäî ÏãúÍ∞Ñ Ï†àÏïΩ)
            const btn = document.getElementById('btn-' + currentTopicId);
            if (btn) btn.classList.add('completed');

        } else {
            feedback.innerText = `Incorrect. üò•\nThe correct answer is:\n\n${currentAnswer}`;
            feedback.className = 'incorrect'; 
        }
    }

    // Î©îÎâ¥ Î≤ÑÌäº ÏÉùÏÑ±
    function createMenuButtons() {
        topicsData.forEach(topic => {
            const button = document.createElement('button');
            button.innerText = topic.name;
            button.id = 'btn-' + topic.id; // ID Î∂ÄÏó¨ ÌïÑÏàò
            button.onclick = () => loadTopic(topic.id);
            menu.appendChild(button);
        });
    }

    // --- Ï¥àÍ∏∞Ìôî Ïã§Ìñâ ---
    createMenuButtons();
    
    checkBtn.addEventListener('click', checkAnswer);

    if (topicsData.length > 0) {
        loadTopic(topicsData[0].id);
    }
</script>
</body>
</html>